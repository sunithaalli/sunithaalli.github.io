define(["exports","preact/jsx-runtime","./hooks/UNSAFE_useMessagesFocusManager","./UNSAFE_LiveRegion","./UNSAFE_Message","preact/hooks","./UNSAFE_Flex","./Flex-40c710fc","./MessagesManager-71797cf8","./MessageUtils-6ad27689",'module',"./utils/UNSAFE_classNames","./classNames-b3be51c1","./MessageCloseButton-a2b0bfff","./MessageDetail-de0beb00","preact","./MessageFormattingUtils-1e3d660c","./utils/UNSAFE_getLocale","./utils/UNSAFE_stringUtils","./stringUtils-5947815e","./Message.types-3f64e234","./utils/UNSAFE_arrayUtils","./MessageStartIcon-99c20c31","./index-e072ff93","./UNSAFE_Icon","./Icon-93ea9369","./tslib.es6-44d49373","./hooks/UNSAFE_useUser","./UNSAFE_Environment","./UNSAFE_Layer","preact/compat","./hooks/UNSAFE_useTheme","./index-6d0068fd","./MessageSummary-b689f53c","./MessageTimestamp-16af3be7","./utils/UNSAFE_interpolations/dimensions","./utils/UNSAFE_size","./_curry1-f1c75636","./utils/UNSAFE_mergeInterpolations","./_curry2-63a708f9","./_has-491b2156","./utils/UNSAFE_interpolations/boxalignment","./keys-1886315d","./utils/UNSAFE_interpolations/flexbox","./flexbox-937ddde3","./utils/UNSAFE_interpolations/flexitem","./flexitem-6444aa08","./utils/UNSAFE_logger","./utils/UNSAFE_soundUtils","./UNSAFE_TransitionGroup"],(function(e,s,n,t,i,a,o,r,l,c,u,g,d,f,m,F,U,h,E,M,_,S,v,x,b,p,A,N,R,y,k,j,C,I,T,B,L,O,P,w,z,W,D,G,H,K,q,J,Q,V){"use strict";const X={enter:[{effect:"expand",duration:"0.25s",direction:"height"}],exit:[{effect:"collapse",duration:"0.25s",direction:"height"}]},Y={close:"Close",navigationFromMessagesRegion:"Entering messages region. Press F6 to navigate back to prior focused element.",navigationToMessagesRegion:"Messages region has new messages. Press F6 to navigate to the most recent message region.",error:"Error",warning:"Warning",info:"Info",confirmation:"Confirmation"};e.MessageBanner=function({closeButtonRenderer:e,detailRendererKey:o,data:u,onClose:g,renderers:d,startAnimation:f,translations:m=Y,type:F="section"}){const U=a.useRef(new Map),h=a.useRef(null),E=a.useRef(null),[M,_]=a.useState(),[S,v]=a.useState(u.length>0),x=a.useRef(u.length),b=a.useRef(0);x.current=u.length;const p=a.useCallback((e=>s=>U.current.set(e,s)),[]);a.useImperativeHandle(E,(()=>({focus:()=>{var e;if(u.length){const s=u[0].key;return null===(e=U.current.get(s))||void 0===e||e.focus(),!0}return!1},contains:e=>{var s,n;return!(!u.length||!e)&&(null!==(n=null===(s=h.current)||void 0===s?void 0:s.contains(e))&&void 0!==n&&n)}})),[u,U]);const{controller:A,handlers:N}=n.useMessageFocusManager(E,{onFocus:a.useCallback((()=>{_(m.navigationFromMessagesRegion)}),[_])}),R=a.useCallback((e=>{null==g||g(e)}),[g]),y=a.useCallback(((e,s,n)=>{var t;const i=null==n?void 0:n.contains(document.activeElement);if(0===x.current)return v(!1),void(i&&A.restorePriorFocus());const a=s+1<u.length?s+1:s-1;if(a>-1&&i){const e=u[a].key;null===(t=U.current.get(e))||void 0===t||t.focus()}}),[A,u]);return a.useEffect((()=>{u.length?(v(!0),u.length>b.current&&_(m.navigationToMessagesRegion),A.prioritize()):_(""),b.current=u.length}),[u,A]),S||0!==u.length?s.jsx("div",Object.assign({ref:h,class:"oj-c-messagebanner",tabIndex:-1},N,{children:s.jsxs(r.Flex,Object.assign({direction:"column",gap:"section"===F?"1x":void 0},{children:[s.jsx(l.MessagesManager,Object.assign({animations:X,data:u,startAnimation:f,onMessageWillRemove:y},{children:({index:n,item:t})=>s.jsx(i.Message,{messageRef:p(t.key),item:t,closeButtonRenderer:e,detailRenderer:c.getRenderer(t,o,d),index:n,translations:m,type:F,onClose:R},t.key)})),s.jsx(t.LiveRegion,{children:M})]}))})):null},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=UNSAFE_MessageBanner.js.map
